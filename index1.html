<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <!--<link rel="icon" href="%PUBLIC_URL%/favicon.ico" />-->
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <!-- CSS only -->
    <link rel="stylesheet" href="https://bootswatch.com/4/darkly/bootstrap.min.css">
    <script src="css/lib/codemirror.js"></script>
    <script src="css/addon/edit/closetag.js"></script>
    <script src="css/javascript/javascript.js"></script>
    <link href="css/lib/codemirror.css" rel="stylesheet"/>
    <link href="css/theme/erlang-dark.css" rel="stylesheet"/>
    <link href="css/theme/isotope.css" rel="stylesheet"/>
    <link href="css/theme/darcula.css" rel="stylesheet"/>
    <link href="css/theme/dracula.css" rel="stylesheet"/>
     <!-- GRAMMAR FOR GRAPH -->
     <script src="gramatica.js"></script>
    <title>Quetzal Grupo #40</title>
  </head>
  <body>
    <div><p></p></div>
    <div class="container-fluid">
        <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
            <ul class="navbar-nav">
                <li class="nav-item" href="AST.html">
                    <input type="file" name="" class="btn btn-block btn-md btn-outline-warning" id="open-file" >
                </li>
                <li class="nav-item">
                    <input type="button" value="Compilar" class="btn btn-block btn-md btn-outline-success" id="BtnCompilar">
                </li>

                <li class="nav-item">
                    <a href="TablaSimbolos.html" class="btn btn-block btn-md btn-outline-info"  id="BtnTablaSimbolos">Tabla de Simbolos</a>  
                </li>

                <li class="nav-item">
                    <a class="btn btn-block btn-md btn-outline-danger" id="BtnReporteErrores">Reporte de Errores</a>  
                </li>

                <li class="nav-item">
                    <a href="AST.html" class="btn btn-block btn-md btn-outline-warning">Arbol AST</a>                    
                </li>
                <li class="nav-item">
                    <a href="#" class="btn btn-block btn-md btn-outline-primary">Reporte Gramatical</a>                    
                </li>
            </ul>
        </nav>
        <p>  </p>
        <hr>
        <div class="row justify-content-md-center">
            <div class="col-md-6 ">
                <h5 align="center">Editor</h5>
            </div>
            <div class="col-md-6">
                <h5 align="center">Salida</h5>
            </div>
        </div>
        <p></p>
        <div class="row justify-content-md-center">
            <div class="col-md-6 justify-content-md-center">
                <div  class="jumbotron">
                    <textarea id="Fuente"></textarea>
                </div>
            </div>
            <div  class="col-md-6 justify-content-md-center">
                <div class="jumbotron">
                    <textarea id="Consola"></textarea>
                </div>
            </div>
        </div>
    </div>  
    <script type="text/javascript" src="Gramatica/gramatica.js"></script>
    <script src="./Interprete/Abstract/Instruction.js"></script>
    <script src="./Interprete/Expresions/Primitive.js"></script>
    <script src="./Interprete/Expresions/Aritmetica.js"></script>
    <script src="./Interprete/TS/Tree.js"></script>
    <script src="./Interprete/TS/TableSymbols.js"></script>
    <script src="./Interprete/TS/Type.js"></script>
    <script src="./Interprete/TS/Exception.js"></script>
    <script src="./Interprete/Instructions/Print.js"></script>
    <script>
        var Fuente = CodeMirror.fromTextArea(document.getElementById('Fuente'),{
            mode: "javascript",
            theme: "darcula",
            lineNumbers: true,
            autoCloseTags: true,
        });
        Fuente.setSize("600","300");
        var Consola = CodeMirror.fromTextArea(document.getElementById('Consola'),{
            mode: null,
            theme: "isotope",
            lineNumbers: true,
            autoCloseTags: true,
            readOnly: true
        });
        Consola.setSize("600","300");

        function Compile(texto){
            Consola.setValue("");
            var instructions = gramatica.parse(texto);
            var tree = new Tree(instructions);
            var tsGlobal = new TableSymbols(null);
            tree.setGlobalTable(tsGlobal);
            tree.getInstruction().forEach(instruction=>{
                var value = instruction.execute(tree, tsGlobal);

            });
            Consola.setValue(tree.getOut());
        }

        document.getElementById('BtnCompilar').onclick = function (){
            var Codigo = Fuente.getValue();
            Compile(Codigo);
        }
    </script>
    <div id="root"></div>
  </body>
  <footer></footer>

</html>
