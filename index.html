<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <!--<link rel="icon" href="%PUBLIC_URL%/favicon.ico" />-->
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <!-- CSS only -->
    <link rel="stylesheet" href="https://bootswatch.com/4/darkly/bootstrap.min.css">
    <script src="css/lib/codemirror.js"></script>
    <script src="css/addon/edit/closetag.js"></script>
    <script src="css/javascript/javascript.js"></script>
    <script src="css/clike/clike.js"></script>
    
    <!-- CSS only -->
    <link href="css/lib/codemirror.css" rel="stylesheet"/>
    <link href="css/theme/erlang-dark.css" rel="stylesheet"/>
    <link href="css/theme/isotope.css" rel="stylesheet"/>
    <link href="css/theme/darcula.css" rel="stylesheet"/>
    <link href="css/theme/dracula.css" rel="stylesheet"/>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" href="./AST/chart/chart.css">
    <script src="./jsPDF/libs/jspdf.umd.js"></script>
    <script src="./jsPDF/jspdf.plugin.autotable.js"></script>
    <title>Quetzal Grupo #40</title>
  </head>
  <body>
    <div><p></p></div>
    <div class="container-fluid">

        <nav class="navbar navbar-expand-sm bg-secondary navbar-light bg-light">
            <!-- Image and text -->
            <nav class="navbar navbar-light bg-light">
                <a class="navbar-brand" href="#">
                <img src="Quetzal.jpg" width="30" height="30" class="d-inline-block align-top" alt="">
                Quetzal-OLC2-P1-G40
                </a>
            </nav>
            <ul class="navbar-nav">
                <li class="nav-item" href="AST.html">
                    <input type="file" name="" class="btn btn-block btn-md btn-warning" id="open-file" >
                </li>
                <li class="nav-item">
                    <a class="btn btn-lg btn-outline-success" id="BtnCompilar">
                        <i class="fas fa-cogs"></i> Compiler<br></a>
                    <br>
                </li>
                <li class="nav-item">
                    <a class="btn btn-lg btn-outline-info" id="BtnLimpiar">
                        <i class="fas fa-broom"></i> Limpiar<br></a>
                </li>
                <li class="nav-item">
                    <a class="btn btn-lg btn-outline-warning" id="BtnC3D">
                        <i class="far fa-file-code"></i>C3D Compiler<br></a>
                </li>
            </ul>
        </nav>
       
        <p>  </p>
        <hr>
        <div class="row justify-content-md-center">
            <div class="col-md-6 ">
                <h5 align="center">Editor</h5>
            </div>
            <div class="col-md-6">
                <h5 align="center">Salida</h5>
            </div>
        </div>
        <p></p>
        <div class="row justify-content-md-center">
            <div class="col-md-6 justify-content-md-center">
                <div  class="jumbotron">
                    <textarea id="Fuente"></textarea>
                </div>
            </div>
            <div  class="col-md-6 justify-content-md-center">
                <span id="copyAnswer"></span>
                <div class="jumbotron">
                    <textarea id="Salida"></textarea>
                </div>
            </div>
        </div>
        <div class="row justify-content-md-center">
            <div class="col-md-6 justify-content-md-center">
                <input type="button" value="Consola" class="btn btn-block btn-md btn-dark" id="BtnConsola" >               
            </div>            
            <div class="col-md-6">
                <input type="button" value="Reporte de Errores" class="btn btn-block btn-md btn-danger" >                
            </div>
        </div>
        <p></p>
        <div class="row justify-content-md-center">
            <div  class="col-md-6 justify-content-md-center" >
                <div class="jumbotron" >
                    <textarea id="Consola"></textarea>
                </div>
            </div>
            <div  class="col-md-6 justify-content-md-center">
                <div class="jumbotron">

                    <div class="col col-sm-12 col-md-10 col-lg-10 col-xl-10" style="height:400px; overflow: scroll;" id="ReportErrors">
                    
                    </div>
                </div>
            </div>
        </div>
        <p>  </p>
        <hr>
        <div class="row justify-content-md-center">
            <div class="col-md-6 justify-content-md-center">
                <input type="button" value="Tabla de Simbolos" class="btn btn-block btn-md btn-info" id="BtnTableSimbol">
            </div>
            <div class="col-md-6">
                <input type="button" value="Reporte Gramatical" class="btn btn-block btn-md btn-warning" >
            </div>
        </div>
        <p></p>
        <div class="row justify-content-md-center">
            <div class="col-md-6 justify-content-md-center">
                <div  class="jumbotron">
                    <div class="col col-sm-12 col-md-10 col-lg-10 col-xl-10" style="height:450px; overflow: scroll;" id="TableSimbol">
                    
                    </div>
                </div>
            </div>
            <div  class="col-md-6 justify-content-md-center">
                <div class="jumbotron">
                    <div class="col col-sm-12 col-md-10 col-lg-10 col-xl-10" style="height:450px; overflow: scroll;" id="ReportGramatical">
                    
                    </div>                    
                </div>
            </div>
        </div>        
        <div class="row justify-content-md-center">
            <div class="col-12">
              <div _ngcontent-pyl-c58="" id="graph-container" name="graph-container" style="text-align: center">
                    
              </div>
            </div>
            
        </div>     
        
    </div>    
    <!-- Gramatica-->
    <script type="text/javascript" src="./Gramatica/gramatica.js"></script>
    <!-- Arbol AST-->
    <script type="text/javascript" src="./AST/GramaticaAST.js"></script>
    <!--Interprete-->
    <script src="./Interprete/Abstract/Instruction.js"></script>
    <script src="./Interprete/Abstract/Generator.js"></script>
    <script src="./Interprete/Abstract/C3DReturn.js"></script>
    <script src="./Interprete/Abstract/Environment.js"></script>
    <script src="./Interprete/Expresions/Primitive.js"></script>
    <script src="./Interprete/Expresions/Aritmetica.js"></script>
    <script src="./Interprete/Expresions/Strings.js"></script>
    <script src="./Interprete/Expresions/Relational.js"></script>
    <script src="./Interprete/Expresions/Logic.js"></script>
    <script src="./Interprete/Expresions/Identifier.js"></script>
    <script src="./Interprete/TS/Tree.js"></script>
    <script src="./Interprete/TS/TableSymbols.js"></script>
    <script src="./Interprete/TS/Type.js"></script>
    <script src="./Interprete/TS/Symbol.js"></script>
    <script src="./Interprete/TS/C3DSymbol.js"></script>
    <script src="./Interprete/TS/Exception.js"></script>
    <script src="./Interprete/Instructions/Print.js"></script>
    <script src="./Interprete/Instructions/Declaration.js"></script>
    <script src="./Interprete/Instructions/Assignation.js"></script>
    <script src="./Interprete/Instructions/While.js"></script>
    <script src="./Interprete/Instructions/Do.js"></script>
    <script src="./Interprete/Instructions/Break.js"></script>
    <script src="./Interprete/Instructions/Continue.js"></script>
    <script src="./Interprete/Instructions/Return.js"></script>
    <script src="./Interprete/Instructions/If.js"></script>
    <script src="./Interprete/Instructions/InstructionError.js"></script>
    <script src="./Interprete/Instructions/Switch.js"></script>
    <script src="./Interprete/Instructions/CaseSwitch.js"></script>
    <script src="./Interprete/Instructions/Function.js"></script>
    <script src="./Interprete/Instructions/CallFunction.js"></script>
    <script src="./Interprete/Instructions/For.js"></script>
    <script src="./Interprete/Instructions/ForIn.js"></script>
    <script src="./Interprete/Instructions/Natives.js"></script>
    <script src="./Interprete/Instructions/Post_fixed.js"></script>
    <script src="./Interprete/Instructions/Ternary.js"></script>
    <script src="./Interprete/Instructions/NativeMethods.js"></script>
    <script src="./Interprete/Instructions/TemplateStruct.js"></script>
    <script src="./Interprete/Instructions/CreateStruct.js"></script>
    <script src="./Interprete/Instructions/AccessAtributeStruct.js"></script>
    <script src="./Interprete/Instructions/ChangeValueStruct.js"></script>
    <script src="./Interprete/Instructions/DeclarationArray.js"></script>
    <script src="./Interprete/Instructions/ListObjects.js"></script>
    <script src="./Interprete/Instructions/AccessArray.js"></script>
    <script src="./Interprete/Instructions/ChangeValueArray.js"></script>
    <script src="./Interprete/Instructions/RangeArray.js"></script>
    <script src="./Interprete/Instructions/CopyArray.js"></script>
    <script src="./Interprete/Instructions/Dot.js"></script>

    <!-- Utils-->
    <script src="Utils/ErrorList.js"></script>
    <script src="Utils/ErrorType.js"></script>
    <script src="Utils/ErrorNode.js"></script>
    <script src="Utils/Node.js"></script>
    <SCRipt src="Utils/TableReport.js"></SCRipt>

    <!-- load the d3.js library --> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
    <script src="./AST/chart/chart.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@1,500&display=swap" rel="stylesheet">

    <!--<script src="./AST/chart/chart.css"></script>-->
    <script src="./Utils/moveDivs.js"></script>
    <script>        
        var openFile = document.getElementById("open-file");
        openFile.addEventListener("change", (event) => {
        const fileUpload = event.target.files;

        if (fileUpload.lenght == 0) {
            alert("Error: Seleccione un archivo");
            return;
        }

        var reader = new FileReader();
        reader.addEventListener("load", function (e) {
            var text = e.target.result;
            Fuente.setValue(text);
        });
        reader.readAsText(fileUpload[0]);
        });
        var valueStd = "Pruebas";
        var Fuente = CodeMirror.fromTextArea(document.getElementById('Fuente'),{
            mode: "text/x-java",
            theme: "dracula",
            lineNumbers: true,
            autoCloseTags: true,
        });
        Fuente.setSize("770","400");
        Fuente.setValue("void main(){\n\t println("+'"Grupo 40"'+"); \n}");

        var Salida = CodeMirror.fromTextArea(document.getElementById('Salida'),{
            mode: "text/x-c++src",
            theme: "dracula",
            lineNumbers: true,
            autoCloseTags: true,
            readOnly: true
        });
        Salida.setSize("770","400");

        var Consola = CodeMirror.fromTextArea(document.getElementById('Consola'),{
            mode: null,
            theme: "isotope",
            lineNumbers: true,
            autoCloseTags: true,
            readOnly: true
        });
        Consola.setSize("770","400");

        function Compile(texto){
            Salida.setValue("");
            Consola.setValue("");
            ErrorList.cleanErrorList();
            TableReport.cleanTableReport();
            texto = deletePharentesis(texto);
            var instructions = gramatica.parse(texto);
            var tree = new Tree(instructions);
            var tsGlobal = new TableSymbols(null);
            tree.setGlobalTable(tsGlobal);
            tree.getInstructions().forEach(instruction=>{
                if(instruction instanceof Function){
                    tree.addFunction(instruction);
                }else if(instruction instanceof TemplateStruct){
                    tree.addStruct(instruction);
                }else{
                    if(instruction instanceof Declaration || instruction instanceof DeclarationArray || instruction instanceof CreateStruct){
                        var value = instruction.execute(tree, tsGlobal);
                        if (value instanceof Exception){
                            console.log(value);
                        }
                    }else{
                        ErrorList.addError(new ErrorNode(instruction.row, instruction.column,new ErrorType(EnumErrorType.SEMANTIC), "Instrucción fuera de función o metodo main", ENVIRONMENT.NULL));
                    }
                }
            });
            var exists = verifyMain(tree);
            if(exists){
                var newTable = new TableSymbols(tsGlobal);
                var result = tree.getFunction("main").execute(tree, newTable);
                if(result instanceof Exception) console.log(result);
            }else{
                console.log("Error, posibles causas: Hay más de un metodo main, no hay metodo main o el metodo main no es de tipo void ");
                ErrorList.addError(new ErrorNode('', '',new ErrorType(EnumErrorType.SEMANTIC), "posibles causas: Hay más de un metodo main, no hay metodo main o el metodo main no es de tipo void ", ENVIRONMENT.NULL));
            }
            Consola.setValue(tree.getOut());
            showTableErrorsSymbols();
            showTableExecuteSymbols(); 
        }

        function CompileC3D(texto){
            Salida.setValue("");
            Consola.setValue("");
            ErrorList.cleanErrorList();
            TableReport.cleanTableReport();
            texto = deletePharentesis(texto);
            var instructions = gramatica.parse(texto);
            var tree = new Tree(instructions);
            var tsGlobal = new TableSymbols(null);
            var generator = new Generator();
            var environment = new Environment(null);
            tree.setGlobalTable(tsGlobal);
            tree.setGenerator(generator);
            tree.getInstructions().forEach(instruction=>{
                if(instruction instanceof Function){
                    tree.addFunction(instruction);
                    if(instruction.name !== "main"){
                        instruction.compile(generator, environment);
                    }
                }else if(instruction instanceof TemplateStruct){
                    tree.addStruct(instruction);
                    TableReport.addTableSymbol(new NodeTableSymbols(instruction.row, instruction.column, String(instruction.name),'STRUCT', tree.getEnvironment(), instruction.parameters));
                }else{
                    if(instruction instanceof Declaration || instruction instanceof DeclarationArray || instruction instanceof CreateStruct){
                        var value = instruction.execute(tree, tsGlobal);
                        if (value instanceof Exception){
                            console.log(value);
                        }else{
                            instruction.compile(generator, environment);
                        }
                    }else{
                        ErrorList.addError(new ErrorNode(instruction.row, instruction.column,new ErrorType(EnumErrorType.SEMANTIC), "Instrucción fuera de función o metodo main", ENVIRONMENT.NULL));
                    }
                }
            });
            var exists = verifyMain(tree);
            if(exists){
                var newTable = new TableSymbols(tsGlobal);
                var result = tree.getFunction("main").execute(tree, newTable);
                tree.getFunction("main").compile(generator, environment);
                if(result instanceof Exception) console.log(result);
            }else{
                console.log("Error, posibles causas: Hay más de un metodo main, no hay metodo main o el metodo main no es de tipo void ");
                ErrorList.addError(new ErrorNode('', '',new ErrorType(EnumErrorType.SEMANTIC), "posibles causas: Hay más de un metodo main, no hay metodo main o el metodo main no es de tipo void ", ENVIRONMENT.NULL));

            }
            //Consola.setValue(tree.getOut());
            Salida.setValue(generator.getCode());
            showTableErrorsSymbols();
            showTableExecuteSymbols();
        }

        function verifyMain(tree){
            var count = 0, pass = true;
            var functions = tree.getFunctions();
            for(var i = 0; i<functions.length; i++){
                if(String(functions[i].name)==="main"){
                    if(functions[i].type !== Type.NULL){
                        pass = false;
                    }
                    count++;
                }
            }
            if (count !== 1) pass = false;
            return pass;
        }

        function deletePharentesis(text){
            var out = "";
            var state = 0; var stack = 0;
            for(var i = 0; i<text.length; i++){
                var aux = text[i];
                if(state === 0){
                    if(aux==='$'){
                        state = 1;
                    }else{
                        out += aux;
                    }
                }else if(state === 1){
                    if(aux==='('){
                        stack = stack+1;
                        out += "\"&"
                        state = 2;
                    }else if(aux!=='('){
                        out+="\"&"+aux;
                        state = 3;
                    }
                }else if(state === 2){
                    if(aux===')'){
                        stack = stack-1;
                        if(stack===0){
                            out += "&\""
                            state = 0;   
                        }else{
                            out+=aux;
                        }
                    }else if(aux==='('){
                        out += "("
                        stack = stack + 1;
                    }else{
                        out+=aux;
                    }
                }else if(state === 3 ){
                    if(aux === " " || aux === "\""){
                        out += "&"+aux+"\"";
                        state = 0;
                    }else{
                        out += aux;
                    }
                }
            }
            return out;
        }
        document.getElementById('BtnTableSimbol').onclick = function (){
            showTableExecuteSymbols();            
        }
        document.getElementById('BtnConsola').onclick = function (){
            showTableExecuteSymbols1();            
        }
        document.getElementById('BtnCompilar').onclick = function (){
            var Codigo = Fuente.getValue();
            Compile(Codigo);
            arbolast(Codigo);            
        }
        document.getElementById('BtnLimpiar').onclick = function (){
            Fuente.setValue("");     
        }
        document.getElementById('BtnC3D').onclick = function (){
            var Codigo = Fuente.getValue();
            CompileC3D(Codigo);
            arbolast(Codigo);
        }

        function arbolast(content){
            treeData = [];
            if (document.getElementById("grafo")) {
                document.getElementById("grafo").remove();
            }
            var result = GramaticaAST.parse(content);
            generateTree([result.node]);
            showTableGramatical();
        }

        function newNode(yy, state, ...nodes) {
            const parent = getNonTerminal(yy, state);
            const children = [];
            //console.log(children);          
            
            for (let node of nodes) {
                node.parent = node.parent ? node.parent : parent;
                if (node.parent == parent) {
                    children.push(node);
                } else if (typeof node == 'string') {
                    children.push({
                        name: node,
                        parent,
                        children: []
                    });
                } else {
                    children.push({
                        name: node.parent,
                        parent,
                        children: [node]
                    });
                }
            }               

            return {
                name: parent,
                parent: null,
                children
            }
        }

        function getNonTerminal(yy, state) {
            const simbolos = yy.parser.symbols_;
            const produccion = yy.parser.productions_[state];
            let nonTerminal = '';
            for (let sim in simbolos) {
                if (simbolos[sim] === produccion[0]) {
                    nonTerminal = sim;
                    break;
                }
            }
            return nonTerminal;
        }

        const templist = [];

        function getTemp() {
            const temp = `t${templist.length}`;
            templist.push(temp);
            return temp;
        }
    

        function showTableErrorsSymbols() {            
            document.getElementById("ReportErrors").innerHTML = "";
        
            var html = "<h2>Reporte de Errores</h2>\n";
            html += '<table class="table table-light" id="ReportErrors">';
            html += '<thead class="thead-light">';
            html += "<tr>";
            html += '<th scope="col">#</th>';
            html += '<th scope="col">Linea</th>';
            html += '<th scope="col">Columna</th>';
            html += '<th scope="col">Tipo de Error</th>';
            html += '<th scope="col">Descripcion</th>';
            html += '<th scope="col">Entorno</th>';
            html += "</tr>";
            html += " </thead>";
            html += "<tbody>";
        
            var nodes = ErrorList.getErrorList();
            for (var i = 0; i < nodes.length; i++) {
            var item = nodes[i];
            html += "<tr>";
            html += `<td>${i + 1}</td>`;
            html += `<td>${item.line}</td>`;
            html += `<td>${item.column}</td>`;
            html += `<td>${item.errorType.toString()}</td>`;
            html += `<td>${item.description}</td>`;
            html += `<td>${item.environmentType}</td>`;
            html += "</tr>";
            }
        
            html += "</tbody>";
            html += "</table>";
            document.getElementById("ReportErrors").innerHTML = html;
        }
        function showTableExecuteSymbols() {
            document.getElementById("TableSimbol").innerHTML = "";
            var lineas = "[";
            var html = "<h2>Tabla de Simbolos </h2>\n";
            html += '<table class="table table-dark" id="TableSimbol">';
            html += '<thead class="thead-light">';
            html += "<tr>";
            html += '<th scope="col">#</th>';
            html += '<th scope="col">IDENTIFICADOR</th>';
            html += '<th scope="col">TIPO</th>';
            html += '<th scope="col">LINEA</th>';
            html += '<th scope="col">COLUMNA</th>';
            html += '<th scope="col">VALOR</th>';
            html += '<th scope="col">ENTORNO</th>';
            html += "</tr>";
            html += " </thead>";
            html += "<tbody>";
            var nodes = TableReport.getTableReport();
            for (var i = 0; i < nodes.length; i++) {
                var item = nodes[i];
                html += "<tr>";
                html += `<td>${i + 1}</td>`;
                html += `<td>${item.name}</td>`;
                html += `<td>${item.type==1?'INT':item.type==2?'DOUBLE':item.type==3?'STRING':item.type==4?'CHAR':item.type==5?'BOOLEAN':item.type==6?'STRUCT':item.type==7?'ARRAY':item.type=='VOID'?'VOID':item.type == 'NULL'?'NULL':item.type}</td>`;
                html += `<td>${item.line}</td>`;
                html += `<td>${item.column}</td>`;
                html += `<td>${item.value}</td>`;
                html += `<td>${item.typeEnviroment}</td>`;
                html += "</tr>";
            }

            html += "</tbody>";
            html += "</table>";
            document.getElementById("TableSimbol").innerHTML = html;
        }
        
        function showTableExecuteSymbols1() {
            console.log("Entramos");
            var doc = new jspdf.jsPDF();
            SymbolList = [];
            var lineas = "{";    
            var nodes = TableReport.getTableReport();
            for (var i = 0; i < nodes.length; i++) {
                var item = nodes[i];   
                
                SymbolList.push([i + 1,item.name,item.type==1?'INT':item.type==2?'DOUBLE':item.type==3?'STRING':item.type==4?'CHAR':item.type==5?'BOOLEAN':item.type==6?'STRUCT':item.type==7?'ARRAY':item.type=='VOID'?'VOID':'NULL',item.line,item.column,item.value,item.typeEnviroment]);          
            }
            
            var head = [['#', 'Identificador', 'Tipo','Linea', 'Columna','Valor','Entorno']]            
            doc.autoTable({ head: head, body: SymbolList })
            doc.autoTable({ html: '#table' })

            doc.save('TablaSimbolos.pdf')
        }
        function showTableGramatical(){
            /*---------------Reporte Gramatical--------------*/
            document.getElementById("ReportGramatical").innerHTML = "";
            
            var html = "<h2>Reporte de Gramatical</h2>\n";
            html += '<table class="table table-light" id="ReportGramatical">';
            html += '<thead class="thead-light">';
            html += "<tr>";
            html += '<th scope="col">#</th>';
            html += '<th scope="col">Produccion Semantica</th>';
            /*html += '<th scope="col">Columna</th>';
            html += '<th scope="col">Tipo de Error</th>';
            html += '<th scope="col">Descripcion</th>';
            html += '<th scope="col">Entorno</th>';*/
            html += "</tr>";
            html += " </thead>";
            html += "<tbody>";
            var nodes = TableReport.GramaticalList;
            for (var i = 0; i < nodes.length; i++) {
                var item = nodes[i];
                html += "<tr>";
                html += `<td>${i + 1}</td>`;
                html += `<td>${item._prod}</td>`;
                html += "</tr>";
            }
            html += "</tbody>";
            html += "</tbody>";
            html += "</table>";
            html += '<table class="table table-light" >';
            html += '<thead class="thead-light">';
            html += "<tr>";
            html += '<th scope="col">#</th>';
            html += '<th scope="col">Produccion </th>';
            /*html += '<th scope="col">Columna</th>';
            html += '<th scope="col">Tipo de Error</th>';
            html += '<th scope="col">Descripcion</th>';
            html += '<th scope="col">Entorno</th>';*/
            html += "</tr>";
            html += " </thead>";
            html += "<tbody>";
            
            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>INIT::= SENTENCES EOF   
                            | EOF
                            ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>SENTENCES::= SENTENCES SENTENCE          
                                    | SENTENCE                    
                                    ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>SENTENCE::= FUNCT                       
                                | PRINT                       
                                | DECLARATION PTOCOMA         
                                | CHANGE_VALUE_STRUCT        
                                | ASSIGNMENT PTOCOMA          
                                | SENTENCE_IF                 
                                | SENTENCE_WHILE              
                                | SENTENCE_DO_WHILE           
                                | SENTENCE_SWITCH             
                                | SENTENCE_FOR                
                                | RETUR                       
                                | BREAKS                      
                                | CONTINU                     
                                | CALL_FUNCTION PTOCOMA       
                                | POST_FIXED PTOCOMA          
                                | TEMPLATE_STRUCT             
                                | CREATE_STRUCT               
                                | METHODS PTOCOMA             
                                | error PTOCOMA               
                                | error KEYCLS                
                        ;`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>CHANGE_VALUE_STRUCT::= ID PTO ACCESS '=' EXP PTOCOMA       
                                            ;
                                        </td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>CREATE_STRUCT::= ID ID '=' ID PAROP L_E PARCLS PTOCOMA      
                                        | ID ID '=' STRUCT_CASES PTOCOMA             
                                        ;</td>`;
            html += "</tr>";
            
            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td> STRUCT_CASES::= ID PAROP PARCLS                  
                                        | ID PTO ACCESS                             
                                        | ID                                        
                                        | nullVal                                   
                                        ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td></td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>TEMPLATE_STRUCT::= STRUCT ID KEYOP PARAMETERS KEYCLS PTOCOMA  
                        ;
                    </td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>PRINT::= Rprint PAROP EXP PARCLS PTOCOMA		  
                        | Rprintln PAROP EXP PARCLS PTOCOMA		
                    ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>DECLARATION::= TIPO IDENTIFIERS                    
                                    | TIPO ID '=' EXP                     
                                    | TIPO COROP CORCLS ID '=' EXP        
                                    | TIPO COROP CORCLS IDENTIFIERS      
                                    | ID COROP CORCLS ID '=' EXP         
                                    | ID COROP CORCLS IDENTIFIERS         
                                    ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>IDENTIFIERS::= IDENTIFIERS COMA ID                
                                    | ID                                 
                        ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>ASSIGNMENT::= ID '=' EXP                                    
                                    | ID ACCESS_ARRAY '=' EXP                        
                        ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>EXP::= EXP '&'  EXP                             
                            | EXP '+'  EXP                              
                            | EXP '-'  EXP                             
                            | EXP '*' EXP                              
                            | EXP '/' EXP                             
                            | EXP '%' EXP                             
                            | EXP '^' EXP                              
                            | '!' EXP                                   
                            | '-' EXP %prec UMENOS                     
                            | EXP '<'  EXP                              
                            | EXP '>'  EXP                              
                            | EXP '&&' EXP                              
                            | EXP '||' EXP                              
                            | EXP '!=' EXP                              
                            | EXP '==' EXP                             
                            | EXP '>=' EXP                              
                            | EXP '<=' EXP                              
                            | CALL_FUNCTION                             
                            | PRIMITIVO                                
                            | PAROP EXP PARCLS                          
                            | ID COROP EXP DOSPTOS EXP CORCLS          
                            | COROP L_E CORCLS                          
                            | COROP CORCLS                              
                            | ID ACCESS_ARRAY                          
                            | ID                                       
                            | '#' ID                                    
                            | ARRAY_DOT                                
                            | POST_FIXED                                
                            | TERNARY                                  
                            | ID PTO ACCESS                             
                            | METHODS                                  
                            ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>ARRAY_DOT::= ID '#'                                   
                                | ID ACCESS_ARRAY '#'                      
                                | ID COROP EXP DOSPTOS EXP CORCLS '#'      
                        ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>ACCESS_ARRAY::= ACCESS_ARRAY COROP EXP CORCLS             
                                    | COROP EXP CORCLS                          
                        ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>ACCESS::= ID PTO ACCESS                           
                                | ID                                     
                            ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>METHODS::= TIPO PTO METHOD PAROP L_E PARCLS           
                                | ID PTO METHOD PAROP L_E PARCLS             
                                | ID PTO METHOD PAROP PARCLS                 
                        ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>METHOD::= TOUPPER             
                                | TOLOWER             
                                | SUBSTR             
                                | LENGTH             
                                | CARACTERPOSC        
                                | PARSE               
                                | PUSH                
                                | POP                
                        ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>TERNARY::= EXP '?' EXP DOSPTOS EXP                 
                    ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>L_E::= L_E COMA EXP                
                            | EXP                         
                        ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>PRIMITIVO::= nullVal         
                                | intVal          
                                | doubleVal      
                                | charVal        
                                | stringVal       
                                | trueVal         
                                | falseVal        
                        ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>TIPO::= INT                                       
                            | DOUBLE                                    
                            | BOOLEAN                                   
                            | STRING                                    
                            | CHAR                                      
                            | VOID                                      
                            ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>SENTENCE_FOR::= FOR PAROP DECLARATION PTOCOMA EXP PTOCOMA POST_FIXED PARCLS BLOCK      
                                    | FOR PAROP ASSIGNMENT PTOCOMA EXP PTOCOMA POST_FIXED PARCLS BLOCK      
                                    | FOR PAROP ID PTOCOMA EXP PTOCOMA POST_FIXED PARCLS BLOCK               
                                    | FOR ID IN EXP BLOCK                                                    
                            ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>BLOCK::= KEYOP SENTENCES KEYCLS  
                                | KEYOP KEYCLS            
                            ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>POST_FIXED::= ID '--'   
                                    | ID '++'   
                            ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>CUERPO::= FUNCT                       
                                | PRINT                       
                                | DECLARATION PTOCOMA         
                                | CHANGE_VALUE_STRUCT        
                                | ASSIGNMENT PTOCOMA          
                                | SENTENCE_WHILE              
                                | SENTENCE_DO_WHILE           
                                | SENTENCE_SWITCH             
                                | SENTENCE_FOR                
                                | RETUR                       
                                | BREAKS                      
                                | CONTINU                     
                                | CALL_FUNCTION PTOCOMA       
                                | POST_FIXED PTOCOMA          
                                | TEMPLATE_STRUCT             
                                | CREATE_STRUCT               
                                | METHODS PTOCOMA             
                                | error PTOCOMA               
                                | error KEYCLS                
                        ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>BLOCK_IF::= KEYOP SENTENCES KEYCLS  
                                | KEYOP KEYCLS            
                                | CUERPO                  
                        ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>SENTENCE_IF::= IF PAROP EXP PARCLS BLOCK_IF ELSE_IF 
                        ;
                    </td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>ELSE_IF::= ELSE IF PAROP EXP PARCLS BLOCK ELSE_IF  
                                | ELSE BLOCK_IF                           
                                | /*epsilone*/                            
                                ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>SENTENCE_SWITCH::= SWITCH PAROP EXP PARCLS BLOCK_SWITCH 
                    ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>BLOCK_SWITCH::= KEYOP L_CASE KEYCLS         
                    | KEYOP KEYCLS                
                    ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>L_CASE::= L_CASE CASES  
                                | CASES         
                                ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>CASES::= CASE EXP BLOCK_CASES        
                                | DEFAULT BLOCK_CASES         
                                ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>BLOCK_CASES::= DOSPTOS SENTENCES       
                                    | DOSPTOS                 
                                    ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>SENTENCE_WHILE::= WHILE PAROP EXP PARCLS BLOCK            
                    ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>SENTENCE_DO_WHILE::= DO BLOCK WHILE PAROP EXP PARCLS PTOCOMA 
                        ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>FUNCT::= TIPO ID PAROP PARCLS BLOCK                            
                            | TIPO ID PAROP PARAMETERS PARCLS BLOCK                 
                            | TIPO COROP CORCLS ID PAROP PARAMETERS PARCLS BLOCK    
                            | TIPO COROP CORCLS ID PAROP PARCLS BLOCK               
                            | ID ID PAROP PARCLS BLOCK                              
                            | ID ID PAROP PARAMETERS PARCLS BLOCK                   
                            ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>PARAMETERS::= PARAMETERS COMA PARAMETER   
                                    | PARAMETER                   
                                    ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>PARAMETER::= TIPO ID                     
                                | TIPO COROP CORCLS ID        
                                | ID ID                       
                                ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>CALL_FUNCTION::= ID PAROP L_E PARCLS                         
                                        | ID '#' PAROP L_E PARCLS                    
                                        | ID PAROP PARCLS                             
                                        | STRING PAROP L_E PARCLS                    
                                        | STRING '#' PAROP L_E PARCLS                 
                                        ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>BREAKS::= BREAK PTOCOMA       
                             ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>CONTINU::= CONTINUE PTOCOMA    
                            ;</td>`;
            html += "</tr>";

            html += "<tr>";
            html += `<td>-</td>`;
            html += `<td>RETUR::= RETURN PTOCOMA     
                            | RETURN EXP PTOCOMA 
                            ;</td>`;
            html += "</tr>";          
            
            html += "</tbody>";
            html += "</tbody>";
            html += "</table>";
            document.getElementById("ReportGramatical").innerHTML = html;

            /*------------------------------------------------*/
        }
    </script>
    

    <div id="root"></div>
  </body>
  <footer></footer>

</html>